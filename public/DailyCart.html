<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Cart</title>
    <link rel="stylesheet" href="DailyCart.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@400;500;700&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="icon" type="image/x-icon" href="assist/icon/Daily-removebg-preview.png">
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
</head>
<body style="font-family: Poppins; background-color: #fff;">
    <header class="head">
        <h1 style="text-align: center; color: black;">Daily <span style="color: white;">Cart</span></h1>
        <ul>
            <li><a>Home</a></li>
            <li><a href="Vegitable.html">Vegetables</a></li>
            <li><a href="About.html">About Us</a></li>
            <li><a href="/profile.html">Profile</a></li>
            <div class="search-box">
                <input type="text" placeholder="search">
            </div>
            <button id="search-toggle" class="icon-button cart">
                <i class="fa-solid fa-magnifying-glass"></i>
                <div class="result-box"></div>
            </button>
            <button id="cart-icon" class="icon-button cart">
                <i class="fa-solid fa-shopping-cart"></i>
                <span class="quantity">0</span>
            </button>
            
            <div class="nav-container">
                <div class="menu-icon" onclick="toggleMenu()">☰</div>
            </div>
            <div class="dropdown-menu" id="dropdownMenu">
                <ul>
                    <li><a href="profile.html">Profile</a></li>
                    <li><a href="seller.html">Seller</a></li>
                    <li><a href="#">Services</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </div>
        </ul>
    </header>

    <div id="search-box" class="search-box">
        <input type="text" placeholder="Search...">
    </div>
    
    <main>
        <div class="container">
            <div class="wrapper">
                <img src="assist/container/Design (2).png" alt="Design Image">
                <img src="assist/container/vegetable-grocery-delivery-promotion-web-banner-facebook-cover-instagram-template_502896-109.jpg" alt="Vegetable Grocery Delivery">
                <img src="assist/container/Design (4).png" alt="Design Image">
                <img src="assist/container/Screenshot 2024-07-31 165751.png" alt="Screenshot">
            </div>
        </div>
        <br><br><br><br>
        <div class="welcome">
            <h2>Stock up on your favorites without leaving home fresh groceries delivered right to your door</h2>
        </div>
        <div class="card-group">
            <div class="box">
                <img src="assist/cardgroup/drinks.png" alt="Drinks & Juices">
                <h4 class="box-title">Drinks & Juices</h4>
            </div>
            <div class="box">
                <img src="assist/cardgroup/biscute.png" alt="Biscuits & Chocolates">
                <h4 class="box-title">Biscuits & Chocolates</h4>
            </div>
            <div class="box">
                <img src="assist/cardgroup/bread.png" alt="Bread & Dairy Products">
                <h4 class="box-title">Bread & Dairy Products</h4>
            </div>
            <div class="box">
                <img src="assist/cardgroup/pickle.png" alt="Pickles">
                <h4 class="box-title">Pickles</h4>
            </div>
            <div class="box">
                <img src="assist/cardgroup/fruits.png" alt="Fruits & Vegetables">
                <h4 class="box-title">Fruits & Vegetables</h4>
            </div>
            <br>
            <div class="box">
                <img src="assist/cardgroup/eggs.png" alt="Eggs & Meat">
                <h4 class="box-title">Eggs & Meat</h4>
            </div>
            <div class="box">
                <img src="assist/cardgroup/homecleaning.png" alt="Home Cleaning Products">
                <h4 class="box-title">Home Cleaning Products</h4>
            </div>
            <div class="box">
                <img src="assist/cardgroup/oats.png" alt="Oats & Wheat Flour">
                <h4 class="box-title">Oats & Wheat Flour</h4>
            </div>
            <div class="box">
                <img src="assist/cardgroup/spices.png" alt="Spices">
                <h4 class="box-title">Spices</h4>
            </div>
            <div class="box">
                <img src="assist/cardgroup/cloths.png" alt="Cloths">
                <h4 class="box-title">Cloths</h4>
            </div>
            <div class="box">
                <img src="assist/cardgroup/accesories.png" alt="Accessories">
                <h4 class="box-title">Accessories</h4>
            </div>
        </div>
        <br>
        <div>
            <h2 class="heading">Vegetables</h2>
            <div class="Veg">
                <div class="card-list">
                    <div class="card">
                        <img src="assist/vegitable.assist/onion.png" alt="Onion">
                        <h4 class="card-title">Onion</h4>
                        <div class="card-price">
                            <span>₹2.45</span>
                            <div class="add">
                                <div class="btn">
                                    <button><i class="fa-solid fa-plus"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <img src="assist/vegitable.assist/tomato.png" alt="Tomato">
                        <h4 class="card-title">Tomato</h4>
                        <div class="card-price">
                            <span>₹4.35</span>
                            <div class="add">
                                <div class="btn">
                                    <button><i class="fa-solid fa-plus"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <img src="assist/vegitable.assist/beetroot.png" alt="Beetroot">
                        <h4 class="card-title">Beetroot</h4>
                        <div class="card-price">
                            <span>₹3.00</span>
                            <div class="add">
                                <div class="btn">
                                    <button><i class="fa-solid fa-plus"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <img src="assist/vegitable.assist/sweet potato.png" alt="Sweet Potato">
                        <br>
                        <h4 class="card-title">Sweet Potato</h4>
                        <div class="card-price">
                            <span>₹8.00</span>
                            <div class="add">
                                <div class="btn">
                                    <button><i class="fa-solid fa-plus"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="card">
                        <img src="assist/vegitable.assist/carrot.png" alt="Carrot">
                        <h4 class="card-title">Carrot</h4>
                        <div class="card-price">
                            <span>₹6.00</span>
                            <div class="add">
                                <div class="btn">
                                    <button><i class="fa-solid fa-plus"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="Veg">
                        <a href="Vegitable.html" style="color: black; text-decoration: none;">More</a>
                    </div>
                    
                </div>
                <div class="fruits">
                    <div class="fru"></div>
                    <div class="heading">
                        <h2>Fruits</h2>
                    </div>
                    <div class="cards-container">
                        <div class="card">
                            <img src="assist/fruits/Screenshot 2024-07-10 162050.png" alt="Mango">
                            <h4 class="card-title">Mango</h4>
                            <div class="card-price">
                                <span>₹10.00</span>
                                <div class="add">
                                    <div class="btn">
                                        <button><i class="fa-solid fa-plus"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br>
                        <div class="card">
                            <img src="assist/fruits/Screenshot 2024-07-15 101053.png" alt="Grapes">
                            <h4 class="card-title">Grapes</h4>
                            <div class="card-price">
                                <span>₹10.00</span>
                                <div class="add">
                                    <div class="btn">
                                        <button><i class="fa-solid fa-plus"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br>
                        <div class="card">
                            <img src="assist/fruits/Screenshot 2024-07-15 112753.png" alt="Pineapple">
                            <h4 class="card-title">Pineapple</h4>
                            <div class="card-price">
                                <span>₹6.00</span>
                                <div class="add">
                                    <div class="btn">
                                        <button><i class="fa-solid fa-plus"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br>
                        <div class="card">
                            <img src="assist/fruits/Screenshot 2024-07-15 095810.png" alt="Banana">
                            <h4 class="card-title">Banana</h4>
                            <div class="card-price">
                                <span>₹5.00</span>
                                <div class="add">
                                    <div class="btn">
                                        <button><i class="fa-solid fa-plus"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br>
                        <div class="card">
                            <img src="assist/fruits/Screenshot 2024-07-15 100932.png" alt="Orange">
                            <h4 class="card-title">Orange</h4>
                            <div class="card-price">
                                <span>₹7.00</span>
                                <div class="add">
                                    <div class="btn">
                                        <button><i class="fa-solid fa-plus"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="fru">
                            <a href="Fruits.html" style="color: black; text-decoration: none;">More</a>
                        </div>
                        
                    </div>
                </div>
                <div class="next-page">
                    <button><a href="product.html" style="color: black; text-decoration: none;"> More>></a></button>
                </div>
            </div>
        </div>
        <div class="footer">
            <div class="p1">
                <p>DailyCart</p>
                <ul>
                    <li>
                        <a href="#">About Us</a>
                    </li>
                    <li>
                        <a href="#">Terms & Conditions</a>
                    </li>
                    <li>
                        <a href="#">Privacy Policy</a>
                    </li>
                    <li>
                        <a href="#">DCnow</a>
                    </li>
                </ul>
            </div>
            <br>
            <div class="p2">
                <p>Help</p>
                <ul>
                    <li>
                        <a href="#">FAQs</a>
                    </li>
                    <li>
                        <a href="#">Contact Us</a>
                    </li>
                    <li>
                        <a href="#">Vendor Connect</a>
                    </li>
                </ul>
            </div>
            <div class="p3">
                <img src="assist/footer/WhatsApp Image 2024-07-26 at 18.29.57_932b7f73.jpg" alt="Footer Image">
                <ul>
                    <li>
                        <h4>A MANTHRI Enterprise</h4>
                    </li>
                </ul>
            </div>
        </div>
        <div class="title">
            <p>Copyright © 2024-2025 Supermarket Grocery Supplies Pvt Ltd</p>
        </div>
    </main>

    <div id="sidebar" class="sidebar">
        <div class="sider-close">x</div>
        <div class="cart-items"></div>
        <div class="sidebar-footer">
            <div class="total">Total: <span class="cart-total">₹0.00</span></div>
            <button class="checkout">Checkout</button>
        </div>
    </div>
    <dialog id="profileDialog">
    <h2>Welcome!</h2>
    <p>Edit your profile before you start shopping.</p>
    <div>
        <button class="profile-btn" onclick="goToProfile()">Profile</button>
        <button class="close-btn" onclick="document.getElementById('profileDialog').close()">Close</button>
    </div>
    </dialog>

    <script src="./DailtyCart.js"></script>
    <script>
        // Simulate login by saving the username in localStorage 
        function login(username) {
            localStorage.setItem('username', username);
            updateLoginStatus();
        }

        // Update the login status based on the stored username
        function updateLoginStatus() {
            const username = localStorage.getItem('username');
            if (username) {
                document.getElementById('profile-link').textContent = username;
            }
        }

        // Call updateLoginStatus when the page loads
        updateLoginStatus();
    </script>
    <form id="addToCartForm">
        <input type="hidden" id="user_id" value="1" /> <input type="number" id="product_id" value="101" /> <input type="number" id="quantity" value="1" />
        <button type="submit">Add to Cart</button>
    </form>
    
    <script>
        document.getElementById("addToCartForm").addEventListener("submit", function(event) {
            event.preventDefault();
    
            const user_id = document.getElementById("user_id").value;
            const product_id = document.getElementById("product_id").value;
            const quantity = document.getElementById("quantity").value;
    
            fetch("/add-to-cart", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ user_id, product_id, quantity })
            })
            .then(response => response.json())
            .then(data => {
                alert(data.message);
            })
            .catch(error => {
                console.error("Error:", error);
            });
        });
        document.addEventListener("DOMContentLoaded", () => {
            const cartIcon = document.getElementById("cart-icon");
            const cartQuantity = cartIcon.querySelector(".quantity");
            const addButtons = document.querySelectorAll(".card .btn button");

            let cartCount = 0;

            addButtons.forEach((button) => {
                button.addEventListener("click", () => {
                    // Increment the cart count
                    cartCount++;
                    cartQuantity.textContent = cartCount;

                
                });
            });
        });
        
       function goToProfile() {
      window.location.href = "/profileInfo.html"; // Change to your actual profile page route
    }

    window.addEventListener("DOMContentLoaded", () => {
      const params = new URLSearchParams(window.location.search);
      if (params.get("justLoggedIn") === "true") {
        setTimeout(() => {
          const dialog = document.getElementById("profileDialog");
          if (typeof dialog.showModal === "function") {
            dialog.showModal();
          }
        }, 2500); // 2.5 second delay

        // Remove query param to avoid re-showing on refresh
        window.history.replaceState({}, document.title, window.location.pathname);
      }
    });
      // Get user from localStorage
    const user = JSON.parse(localStorage.getItem("user"));

    if (user && user.email) {
      const displayName = user.username || user.email.split("@")[0];
      document.getElementById("welcomeUser").textContent = displayName;
      document.getElementById("userEmail").textContent = user.email;
    } else {
      // Redirect to login if no user data is found
      window.location.href = "login.html";
    }
    </script>
    


</body>
</html>